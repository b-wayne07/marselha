<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagn√≥stico Financeiro | Condom√≠nio Marselha - Jul 2024 a Jun 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(ellipse at top left, #2d3748 60%, #1a202c 100%);
            transition: background 1s;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            animation: fadeInUp 1.5s cubic-bezier(.59,.27,.62,.99);
        }
        @media (min-width: 768px) {
            .chart-container { height: 500px; }
        }
        .kpi-card {
            background: linear-gradient(135deg, #23272f 80%, #1a202c 100%);
            border-left: 5px solid;
            transition: transform 0.4s cubic-bezier(.59,.27,.62,.99), box-shadow 0.4s cubic-bezier(.59,.27,.62,.99);
            cursor: pointer;
            will-change: transform;
            position: relative;
            overflow: hidden;
        }
        .kpi-card:hover {
            transform: translateY(-12px) scale(1.05);
            box-shadow: 0 18px 22px -6px rgba(0,0,0,0.18), 0 8px 12px -4px rgba(0,0,0,0.08);
        }
        .kpi-card:after {
            content: '';
            position: absolute;
            bottom: -40px; right: -40px;
            width: 80px; height: 80px;
            background: rgba(255,255,255,0.03);
            border-radius: 50%;
            transition: opacity 0.4s;
            pointer-events: none;
        }
        .kpi-orange { border-color: #FF69B4; }
        .kpi-green { border-color: #40E0D0; }
        .kpi-red { border-color: #FF8C00; }
        .flowchart-step {
            border: 2px solid #4A5568;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            background: linear-gradient(120deg, #2D3748 80%, #23272f 100%);
            color: white;
            flex: 1;
            min-width: 200px;
            box-shadow: 0 4px 20px -8px #000;
            position: relative;
            overflow: hidden;
        }
        .flowchart-step:before {
            content: '';
            position: absolute;
            top: -25px; left: -25px;
            width: 50px; height: 50px;
            background: rgba(255,255,255,0.05);
            border-radius: 50%;
            z-index: 0;
            pointer-events: none;
        }
        .flowchart-arrow {
            font-size: 2.5rem;
            color: #FF69B4;
            margin: 1.5rem 0;
            align-self: center;
            transition: transform 0.4s cubic-bezier(.59,.27,.62,.99);
            animation: bounceArrow 1.2s infinite;
        }
        .attention-card {
            background: linear-gradient(90deg, #FEFCE8 80%, #fffbe6 100%);
            border-left: 4px solid #FBBF24;
            transition: box-shadow 0.4s;
            animation: fadeInRight 1.2s cubic-bezier(.59,.27,.62,.99);
        }
        @keyframes fadeInUp {
            0% { opacity: 0; transform: translateY(60px);}
            100% { opacity: 1; transform: translateY(0);}
        }
        @keyframes fadeInRight {
            0% { opacity: 0; transform: translateX(60px);}
            100% { opacity: 1; transform: translateX(0);}
        }
        @keyframes bounceArrow {
            0%,100% { transform: translateY(0);}
            50% { transform: translateY(-10px);}
        }
        .interactive-btn {
            background: linear-gradient(90deg, #FF69B4 60%, #40E0D0 100%);
            color: #fff;
            font-weight: bold;
            border-radius: 9999px;
            padding: 0.75rem 2.5rem;
            box-shadow: 0 2px 12px -2px #FF69B4, 0 1px 4px -1px #40E0D0;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }
        .interactive-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 6px 20px -4px #FF69B4, 0 2px 8px -2px #40E0D0;
        }
        .sparkle {
            position: absolute;
            pointer-events: none;
            width: 22px;
            height: 22px;
            opacity: 0.7;
            z-index: 9999;
            animation: sparkleFade 1.2s forwards;
        }
        @keyframes sparkleFade {
            0% { opacity: 0.8; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* Mobile optimization */
        @media (max-width: 640px) {
            .container {
                padding-left: 0.5rem !important;
                padding-right: 0.5rem !important;
            }
            .chart-container {
                height: 280px;
                min-width: 0;
                max-width: 100vw;
            }
            .kpi-card {
                padding: 1.25rem !important;
                font-size: 1rem !important;
            }
            .flowchart-step {
                min-width: 0;
                font-size: 1rem !important;
            }
        }

    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <header class="bg-gray-800 shadow-lg p-6">
        <div class="container mx-auto text-center">
            <h1 class="text-3xl md:text-4xl font-black text-white uppercase animate-pulse">Diagn√≥stico Financeiro do Condom√≠nio</h1>
            <p class="text-lg text-blue-300">Condom√≠nio Marselha | CNPJ: 54.104.653/0001-40</p>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <section id="kpis" class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-2 text-white">Os √∫ltimos 12 meses</h2>
            <p class="text-center text-gray-400 max-w-3xl mx-auto mb-8">
                Os n√∫meros do √∫ltimo ano (Jul/2024 a Jun/2025) mostram um cen√°rio preocupante. O condom√≠nio gastou consistentemente mais do que arrecadou, fechando o per√≠odo com um d√©ficit alarmante.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="kpi-card kpi-orange p-6 rounded-lg shadow-xl" data-sparkle>
                    <h3 class="text-lg font-bold text-gray-300">Total de D√©ficit</h3>
                    <p class="text-5xl font-black text-orange-400 transition-all" id="deficit-value">- R$ 288.775,99</p>
                    <p class="text-gray-400 mt-2">Soma de todos os meses negativos.</p>
                </div>
                <div class="kpi-card kpi-green p-6 rounded-lg shadow-xl" data-sparkle>
                    <h3 class="text-lg font-bold text-gray-300">Total de Super√°vit</h3>
                    <p class="text-5xl font-black text-teal-400 transition-all" id="superavit-value">+ R$ 71.724,60</p>
                    <p class="text-gray-400 mt-2">Soma de todos os meses positivos.</p>
                </div>
                <div class="kpi-card kpi-red p-6 rounded-lg shadow-xl" data-sparkle>
                    <h3 class="text-lg font-bold text-gray-300">D√©ficit Total do Ano</h3>
                    <p class="text-5xl font-black text-red-400 transition-all" id="total-deficit-value">- R$ 217.051,39</p>
                    <p class="text-gray-400 mt-2">Resultado final dos √∫ltimos 12 meses.</p>
                </div>
            </div>
        </section>

        <section id="volatility" class="bg-gray-800 p-6 rounded-lg shadow-2xl mb-12">
            <h2 class="text-3xl font-bold text-center mb-2 text-white">Balan√ßo Anual: D√©ficit vs. Super√°vit</h2>
            <p class="text-center text-gray-400 max-w-3xl mx-auto mb-8">
                O gr√°fico de colunas mostra a trajet√≥ria financeira do condom√≠nio. Tivemos nove meses no vermelho (d√©ficit) e apenas tr√™s no azul (super√°vit), que n√£o foram suficientes para cobrir os preju√≠zos acumulados.
            </p>
            <div class="chart-container">
                <canvas id="monthlyResultChart"></canvas>
            </div>
        </section>

        <section id="red-flags" class="bg-gray-800 p-6 rounded-lg shadow-2xl mb-12">
            <h2 class="text-3xl font-bold text-center mb-2 text-yellow-400">üí° Pontos de Aten√ß√£o: Transa√ß√µes a Esclarecer</h2>
            <p class="text-center text-gray-400 max-w-3xl mx-auto mb-8">
                A an√°lise dos √∫ltimos meses revela um padr√£o de pagamentos recorrentes e de alto valor a prestadores de servi√ßo individuais. Essas transa√ß√µes, muitas vezes sem a clareza de contratos formais, representam pontos que necessitam de uma an√°lise detalhada para garantir a conformidade e a melhor aplica√ß√£o dos recursos do condom√≠nio.
            </p>
            <div class="space-y-4">
                <div class="attention-card p-4 rounded-md flex items-center justify-between flex-wrap gap-4" data-interactive>
                    <div>
                        <p class="font-bold text-gray-800">THIAGO APARECIDO DOS SANTOS</p>
                        <p class="text-sm text-gray-600">Servi√ßo: Manuten√ß√£o (Pagamento recorrente mensal)</p>
                    </div>
                    <p class="text-2xl font-black text-amber-600">R$ 3.150,00 (Ex: Maio)</p>
                </div>
                <div class="attention-card p-4 rounded-md flex items-center justify-between flex-wrap gap-4" data-interactive>
                    <div>
                        <p class="font-bold text-gray-800">RENATO SILVA OLIVEIRA</p>
                        <p class="text-sm text-gray-600">Servi√ßo: Manuten√ß√£o Predial (Sem NF informada em Maio)</p>
                    </div>
                    <p class="text-2xl font-black text-amber-600">R$ 3.300,36 (em Maio)</p>
                </div>
                 <div class="attention-card p-4 rounded-md flex items-center justify-between flex-wrap gap-4" data-interactive>
                    <div>
                        <p class="font-bold text-gray-800">VANESSA ALVES COSTA</p>
                        <p class="text-sm text-gray-600">Servi√ßo: Jardinagem (Pagamento recorrente mensal)</p>
                    </div>
                    <p class="text-2xl font-black text-amber-600">R$ 2.600,00 (Ex: Maio)</p>
                </div>
            </div>
        </section>

        <section id="action-plan" class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-2 text-white">Plano de A√ß√£o Estrat√©gico para Recupera√ß√£o</h2>
            <p class="text-center text-gray-400 max-w-3xl mx-auto mb-8">
                A revers√£o deste quadro exige a√ß√µes en√©rgicas e imediatas. O plano a seguir estrutura o caminho para estancar a crise, reconstruir a governan√ßa e garantir a sustentabilidade financeira do condom√≠nio.
            </p>
            <div class="flex flex-col md:flex-row justify-between items-stretch gap-4">
                <div class="flowchart-step" data-interactive>
                    <h3 class="text-xl font-bold mb-2 text-orange-400">Curto Prazo (30 Dias)</h3>
                    <p>Auditoria independente, revis√£o emergencial de contratos e congelamento de gastos n√£o essenciais.</p>
                </div>
                <div class="flowchart-arrow transform md:rotate-0 rotate-90">‚Üí</div>
                <div class="flowchart-step" data-interactive>
                    <h3 class="text-xl font-bold mb-2 text-yellow-400">M√©dio Prazo (180 Dias)</h3>
                    <p>Implementar pol√≠tica de compras (3 or√ßamentos), gest√£o profissional da inadimpl√™ncia e recomposi√ß√£o dos fundos.</p>
                </div>
                <div class="flowchart-arrow transform md:rotate-0 rotate-90">‚Üí</div>
                <div class="flowchart-step" data-interactive>
                    <h3 class="text-xl font-bold mb-2 text-teal-300">Longo Prazo (Permanente)</h3>
                    <p>Adotar software de gest√£o com portal da transpar√™ncia, or√ßamento base zero e plano de manuten√ß√£o preventiva.</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-center p-4 mt-8">
        <p class="text-sm text-gray-500">&copy; 2025 An√°lise Gerada para o Condom√≠nio Marselha. Todos os dados baseados nos relat√≥rios financeiros de Julho de 2024 a Junho de 2025.</p>
        <!-- Energetic & Playful Palette -->
        <!-- All charts rendered using Chart.js and object animations are CSS/JS. -->
    </footer>

    <script>
        // Chart.js setup
        const FONT_COLOR = '#E5E7EB';
        const GRID_COLOR = '#4B5563';
        const PALETTE = {
            blue: '#0077B6',
            orange: '#FF8C00',
            yellow: '#FFD700',
            pink: '#FF69B4',
            teal: '#40E0D0',
            gray: '#6B7280'
        };

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            }
            return label;
        };
        
        const commonChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback,
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) label += ': ';
                            if (context.parsed.y !== null) {
                                label += new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(context.parsed.y);
                            }
                            return label;
                        }
                    },
                    backgroundColor: '#1F2937',
                    titleColor: '#FFFFFF',
                    bodyColor: '#D1D5DB',
                    titleFont: { size: 16, weight: 'bold' },
                    bodyFont: { size: 14 },
                    padding: 12,
                    cornerRadius: 6,
                    displayColors: false
                }
            },
            scales: {
                y: {
                    ticks: { 
                        color: FONT_COLOR, 
                        font: { size: 12 },
                        callback: function(value, index, values) {
                            if (value >= 1000 || value <= -1000) {
                                return 'R$ ' + (value / 1000) + 'k';
                            }
                            return 'R$ ' + value;
                        }
                    },
                    grid: { color: GRID_COLOR }
                },
                x: {
                    ticks: { 
                        color: FONT_COLOR, 
                        font: { size: 12 }
                    },
                    grid: { color: 'transparent' }
                }
            }
        };

        const monthlyDataOrig = [-83957.32, -75516.75, -60723.64, 1667.26, 13847.68, 5584.27, -6078.40, -8615.59, -8322.61, 50625.39, -45009.87, -551.81];
        const backgroundColors = monthlyDataOrig.map(value => value >= 0 ? 'rgba(64, 224, 208, 0.6)' : 'rgba(255, 105, 180, 0.6)');
        const borderColors = monthlyDataOrig.map(value => value >= 0 ? 'rgba(64, 224, 208, 1)' : 'rgba(255, 105, 180, 1)');

        let chart;
        function drawChart(data) {
            if (chart) chart.destroy();
            chart = new Chart(document.getElementById('monthlyResultChart'), {
                type: 'bar',
                data: {
                    labels: ['Jul/24', 'Ago/24', 'Set/24', 'Out/24', 'Nov/24', 'Dez/24', 'Jan/25', 'Fev/25', 'Mar/25', 'Abr/25', 'Mai/25', 'Jun/25'],
                    datasets: [{
                        label: 'Resultado Mensal (R$)',
                        data: data,
                        backgroundColor: backgroundColors,
                        borderColor: borderColors,
                        borderWidth: 2,
                        borderRadius: 4
                    }]
                },
                options: { ...commonChartOptions }
            });
        }
        drawChart(monthlyDataOrig);

        // Chart animation button
        function animateChart() {
            let steps = 40, frame = 0;
            let current = Array(monthlyDataOrig.length).fill(0);
            let increments = monthlyDataOrig.map(val => val/steps);
            function step() {
                if (frame < steps) {
                    current = current.map((val, idx) => val + increments[idx]);
                    drawChart(current);
                    frame++;
                    requestAnimationFrame(step);
                } else {
                    drawChart(monthlyDataOrig);
                }
            }
            step();
        }

        // KPI Number Animation
        function animateNumber(id, targetValue, prefix = '', duration = 1200) {
            const el = document.getElementById(id);
            let start = 0, startTime = null, sign = targetValue < 0 ? '-' : '+';
            targetValue = Math.abs(targetValue);
            function format(val) {
                return `${sign} R$ ${val.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;
            }
            function tick(ts) {
                if (!startTime) startTime = ts;
                let progress = Math.min((ts - startTime) / duration, 1);
                let val = Math.floor(progress * targetValue);
                if (progress < 1) {
                    el.textContent = format(val);
                    requestAnimationFrame(tick);
                } else {
                    el.textContent = format(targetValue);
                }
            }
            requestAnimationFrame(tick);
        }

        // Animate KPIs on load and on hover
        window.addEventListener('DOMContentLoaded', () => {
            animateNumber("deficit-value", -288775.99, '-', 1500);
            animateNumber("superavit-value", 71724.60, '+', 1500);
            animateNumber("total-deficit-value", -217051.39, '-', 1500);

            // Sparkle effect on KPI card hover
            document.querySelectorAll('[data-sparkle]').forEach(card => {
                card.addEventListener('mouseenter', function(e) {
                    for (let i=0; i<6; i++) createSparkle(card);
                });
            });
        });

        // Sparkle generator
        function createSparkle(card) {
            const sparkle = document.createElement('img');
            sparkle.src = "data:image/svg+xml;utf8,<svg width='22' height='22' xmlns='http://www.w3.org/2000/svg'><g><ellipse cx='11' cy='11' rx='7' ry='7' fill='%23FF69B4' opacity='0.7'/><ellipse cx='11' cy='11' rx='3.5' ry='3.5' fill='%2340E0D0' opacity='0.7'/></g></svg>";
            sparkle.className = "sparkle";
            sparkle.style.left = `${Math.random()*80+10}%`;
            sparkle.style.top = `${Math.random()*60+20}%`;
            card.appendChild(sparkle);
            setTimeout(() => { sparkle.remove(); }, 1100);
        }

        // Interactive effect for attention cards and flowchart steps
        document.querySelectorAll('[data-interactive]').forEach(el => {
            el.addEventListener('mouseenter', function() {
                el.style.boxShadow = '0 8px 24px -6px #FFD700, 0 2px 8px -2px #FF69B4';
                el.style.transform = 'scale(1.04)';
            });
            el.addEventListener('mouseleave', function() {
                el.style.boxShadow = '';
                el.style.transform = '';
            });
        });

        // Global background transition on button click
        document.querySelector('.interactive-btn').addEventListener('click', function() {
            document.body.style.background = 'radial-gradient(ellipse at bottom right, #40E0D0 40%, #FF69B4 100%)';
            setTimeout(() => {
                document.body.style.background = 'radial-gradient(ellipse at top left, #2d3748 60%, #1a202c 100%)';
            }, 1200);
        });
    </script>
</body>
</html>
